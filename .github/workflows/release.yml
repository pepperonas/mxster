name: Create Release

on:
  push:
    tags:
      - 'v*'  # Trigger on version tags like v1.0.0, v1.1.0, etc.

jobs:
  create-release:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Get tag name
        id: tag_name
        run: echo "TAG=${GITHUB_REF#refs/tags/}" >> $GITHUB_OUTPUT

      - name: Create GitHub Release (Draft)
        uses: softprops/action-gh-release@v1
        with:
          tag_name: ${{ steps.tag_name.outputs.TAG }}
          name: Release ${{ steps.tag_name.outputs.TAG }}
          body: |
            ## üéµ mxster Release ${{ steps.tag_name.outputs.TAG }}

            ### üì¶ Downloads

            **PDF Druckkarten** (4 Karten pro A4-Seite):
            - Standard (Farbig) - Manuell hochladen
            - Schwarz-Wei√ü - Manuell hochladen
            - Duplex (Farbig) - Manuell hochladen
            - Duplex (Schwarz-Wei√ü) - Manuell hochladen

            **3D-Druckmodelle**:
            - All-Cards (3MF) - Siehe Repository
            - SCAD Models (ZIP) - Manuell hochladen
            - STL Models (ZIP) - Manuell hochladen

            ### üñ®Ô∏è Druckeinstellungen
            **3D-Druck**:
            - Layer Height: 0.1-0.15mm
            - Infill: 100%
            - Material: PLA oder PETG
            - Support: Nicht n√∂tig

            ### üìù Hinweis
            Assets werden manuell hochgeladen. Nutze:
            ```bash
            gh release upload ${{ steps.tag_name.outputs.TAG }} pwa/*.pdf mxster-*.zip card-generator/models/all-cards.3mf
            ```
          files: card-generator/models/all-cards.3mf
          draft: true
          prerelease: true
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
